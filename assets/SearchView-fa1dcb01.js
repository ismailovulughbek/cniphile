import{j as S,k,l as w,m as V,r as h,n as d,w as $,e as A,o as r,c as l,b as _,p as B,v as U,f as u,q as p,F as b,g as N,h as T,s as q,i as m,a as g,x as C}from"./index-10a2018a.js";const v=S("search",{state:()=>({baseUrl:"https://api.themoviedb.org/3/",searchArray:null,search:"",adult:!1,total_results:1}),actions:{async getSearch(o=1){if(this.search!="")try{const e=await k({method:"GET",url:`${this.baseUrl}search/multi?query=${this.search}&include_adult=${this.adult}&language=${w}&page=${o}`,headers:V});this.searchArray=e.data.results,this.total_results=e.data.total_results,console.log(e.data)}catch(e){console.error("Ошибка при получении Search",e)}else this.searchArray=null}}}),E={class:"search"},F={class:"container"},R=["placeholder"],j={key:0,class:"media__list"},D={key:1,class:"search__paginate"},G={__name:"Search",props:["placeholder"],setup(o){const e=v();let t=h("");const c=d(()=>e.searchArray);let s=h(1),y=d(()=>e.total_results);const f=()=>{s.value+1,e.getSearch(s.value)};return $(()=>t.value,i=>{e.search=i,e.getSearch()}),(i,n)=>{const x=A("vue-awesome-paginate");return r(),l("section",E,[_("div",F,[B(_("input",{type:"text",class:"search__input",placeholder:o.placeholder,"onUpdate:modelValue":n[0]||(n[0]=a=>p(t)?t.value=a:t=a)},null,8,R),[[U,u(t)]]),c.value?(r(),l("div",j,[(r(!0),l(b,null,N(c.value,a=>(r(),T(q,{key:a.id,content:a,type:a.media_type},null,8,["content","type"]))),128))])):m("",!0),c.value?(r(),l("div",D,[g(x,{"total-items":u(y),"items-per-page":20,"max-pages-shown":5,modelValue:u(s),"onUpdate:modelValue":n[1]||(n[1]=a=>p(s)?s.value=a:s=a),"on-click":f},null,8,["total-items","modelValue"])])):m("",!0)])])}}},L={class:"main"},P={__name:"SearchView",setup(o){const e=v();return C(()=>{e.searchArray=null,e.search="",e.total_results=1}),(t,c)=>(r(),l("main",L,[g(G,{placeholder:"Найти фильм, сериал..."})]))}};export{P as default};
